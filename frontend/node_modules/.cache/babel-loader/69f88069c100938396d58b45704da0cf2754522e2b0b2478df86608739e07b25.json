{"ast":null,"code":"var _jsxFileName = \"/Users/mac/project/villa-parking-management/frontend/src/components/ParkingArea.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\nimport { useDrop } from 'react-dnd';\nimport DraggableResizableItem from './DraggableResizableItem';\nimport { ItemTypes } from './ItemTypes';\nimport '../styles/ParkingArea.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ParkingArea = ({\n  spaces,\n  moveSpace,\n  resizeSpace,\n  deleteSpace\n}) => {\n  _s();\n  const [containerSize, setContainerSize] = useState({\n    width: 0,\n    height: 0\n  });\n  const containerRef = useRef(null);\n  useEffect(() => {\n    if (containerRef.current) {\n      setContainerSize({\n        width: containerRef.current.offsetWidth,\n        height: containerRef.current.offsetHeight\n      });\n    }\n  }, []);\n  const [, drop] = useDrop({\n    accept: [ItemTypes.V, ItemTypes.PARKING, ItemTypes.EXIT, ItemTypes.WALL],\n    drop(item, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset();\n      if (!delta) return;\n      let newLeft = Math.round(item.left + delta.x);\n      let newTop = Math.round(item.top + delta.y);\n\n      // Ensure the item stays within the boundaries\n      newLeft = Math.max(0, Math.min(newLeft, containerSize.width - item.width));\n      newTop = Math.max(0, Math.min(newTop, containerSize.height - item.height));\n      moveSpace(item.id, newLeft, newTop);\n    }\n  });\n\n  // Combine refs\n  const setRefs = useCallback(node => {\n    containerRef.current = node;\n    drop(node);\n  }, [drop]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setRefs,\n    className: \"parking-area\",\n    children: spaces.map(space => /*#__PURE__*/_jsxDEV(DraggableResizableItem, {\n      id: space.id,\n      type: space.type,\n      left: space.left,\n      top: space.top,\n      width: space.width,\n      height: space.height,\n      moveSpace: moveSpace,\n      resizeSpace: resizeSpace,\n      deleteSpace: deleteSpace,\n      containerWidth: containerSize.width,\n      containerHeight: containerSize.height\n    }, space.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n};\n_s(ParkingArea, \"ks6DXaes4uu7HI4A244JkxU/y8c=\", false, function () {\n  return [useDrop];\n});\n_c = ParkingArea;\nexport default ParkingArea;\nvar _c;\n$RefreshReg$(_c, \"ParkingArea\");","map":{"version":3,"names":["React","useRef","useEffect","useState","useCallback","useDrop","DraggableResizableItem","ItemTypes","jsxDEV","_jsxDEV","ParkingArea","spaces","moveSpace","resizeSpace","deleteSpace","_s","containerSize","setContainerSize","width","height","containerRef","current","offsetWidth","offsetHeight","drop","accept","V","PARKING","EXIT","WALL","item","monitor","delta","getDifferenceFromInitialOffset","newLeft","Math","round","left","x","newTop","top","y","max","min","id","setRefs","node","ref","className","children","map","space","type","containerWidth","containerHeight","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/mac/project/villa-parking-management/frontend/src/components/ParkingArea.js"],"sourcesContent":["import React, { useRef, useEffect, useState, useCallback } from 'react';\nimport { useDrop } from 'react-dnd';\nimport DraggableResizableItem from './DraggableResizableItem';\nimport { ItemTypes } from './ItemTypes';\nimport '../styles/ParkingArea.css';\n\nconst ParkingArea = ({ spaces, moveSpace, resizeSpace, deleteSpace }) => {\n  const [containerSize, setContainerSize] = useState({ width: 0, height: 0 });\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    if (containerRef.current) {\n      setContainerSize({\n        width: containerRef.current.offsetWidth,\n        height: containerRef.current.offsetHeight,\n      });\n    }\n  }, []);\n\n  const [, drop] = useDrop({\n    accept: [ItemTypes.V, ItemTypes.PARKING, ItemTypes.EXIT, ItemTypes.WALL],\n    drop(item, monitor) {\n      const delta = monitor.getDifferenceFromInitialOffset();\n      if (!delta) return;\n      let newLeft = Math.round(item.left + delta.x);\n      let newTop = Math.round(item.top + delta.y);\n\n      // Ensure the item stays within the boundaries\n      newLeft = Math.max(0, Math.min(newLeft, containerSize.width - item.width));\n      newTop = Math.max(0, Math.min(newTop, containerSize.height - item.height));\n\n      moveSpace(item.id, newLeft, newTop);\n    },\n  });\n\n  // Combine refs\n  const setRefs = useCallback((node) => {\n    containerRef.current = node;\n    drop(node);\n  }, [drop]);\n\n  return (\n    <div ref={setRefs} className=\"parking-area\">\n      {spaces.map((space) => (\n        <DraggableResizableItem\n          key={space.id}\n          id={space.id}\n          type={space.type}\n          left={space.left}\n          top={space.top}\n          width={space.width}\n          height={space.height}\n          moveSpace={moveSpace}\n          resizeSpace={resizeSpace}\n          deleteSpace={deleteSpace}\n          containerWidth={containerSize.width}\n          containerHeight={containerSize.height}\n        />\n      ))}\n    </div>\n  );\n};\n\nexport default ParkingArea;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}